{"version":3,"file":"confApp.controller.js","names":["require","response","request","boom","ConfApp","Device","getConfActiveCompany","req","res","findOne","deleted","confAppCompany","status","json","msg","setConfCompany","body","_id","findByIdAndUpdate","confAppCompanySaved","message","setConnectionDeviceController","next","console","log","device","save","newDevice","badRequest","updateConnectionDeviceController","params","module","exports"],"sources":["../../src/controllers/confApp.controller.js"],"sourcesContent":["const { response, request } = require('express');\nconst boom = require('@hapi/boom');\nconst ConfApp = require('../models/confApp.model');\nconst Device = require('../models/connections/device.model');\n\nconst getConfActiveCompany = async (req = request, res = response) => {\n  try {\n    const confAppCompany = await ConfApp.findOne({ deleted: false });\n    res.status(200).json({\n      msg: 'Configuracion de la compania',\n      confAppCompany,\n    });\n  } catch (err) {\n    return res.status(500).json({\n      msg: 'Algo ha salido mal...',\n    });\n  }\n};\n\nconst setConfCompany = async (req = request, res = response) => {\n  try {\n    const body = req.body;\n\n    const { _id } = await ConfApp.findOne({ deleted: false });\n\n    const confAppCompanySaved = await ConfApp.findByIdAndUpdate(_id, body, {\n      new: true,\n    });\n\n    res.status(201).json({\n      msg: 'Configuracion cargada',\n      confAppCompanySaved,\n    });\n  } catch (err) {\n    return res.status(500).json({\n      msg: `Algo ha salido mal...${err.message}`,\n    });\n  }\n};\n\nconst setConnectionDeviceController = async (req, res, next) => {\n  try {\n    const body = req.body;\n    console.log({ body });\n    const device = new Device(body);\n    console.log({ device });\n    const newDevice = await device.save();\n    console.log({ newDevice });\n    if (!newDevice) {\n      throw boom.badRequest('Algo salió mal, verifica el requerimiento');\n    } else {\n      res.status(201).json({\n        message: 'Un nuevo device ha sido creado con exito',\n        newDevice,\n      });\n    }\n  } catch (err) {\n    next(err);\n  }\n};\n\nconst updateConnectionDeviceController = async (req, res, next) => {\n  try {\n    const body = req.body;\n    const { _id } = req.params;\n    console.log({ body });\n    const device = await Device.findByIdAndUpdate(_id, body, { new: true });\n    if (!device) {\n      throw boom.badRequest('Algo salió mal, verifica el requerimiento');\n    } else {\n      res.status(201).json({\n        message: `Cambios aceptados para el device con _id:${_id}`,\n        device,\n      });\n    }\n  } catch (err) {\n    next(err);\n  }\n};\n\nmodule.exports = {\n  getConfActiveCompany,\n  setConfCompany,\n  setConnectionDeviceController,\n  updateConnectionDeviceController,\n};\n"],"mappings":";;;;+CACA,oJ;;;;;;AADA,eAA8BA,OAAO,CAAC,SAAD,CAArC;AAAA,IAAQC,QAAR,YAAQA,QAAR;AAAA,IAAkBC,OAAlB,YAAkBA,OAAlB;;AACA,IAAMC,IAAI,GAAGH,OAAO,CAAC,YAAD,CAApB;;AACA,IAAMI,OAAO,GAAGJ,OAAO,CAAC,yBAAD,CAAvB;;AACA,IAAMK,MAAM,GAAGL,OAAO,CAAC,oCAAD,CAAtB;;AAEA,IAAMM,oBAAoB;EAAA,sEAAG;IAAA;IAAA;IAAA;IAAA;IAAA;MAAA;QAAA;UAAA;YAAOC,GAAP,2DAAaL,OAAb;YAAsBM,GAAtB,2DAA4BP,QAA5B;YAAA;YAAA;YAAA,OAEIG,OAAO,CAACK,OAAR,CAAgB;cAAEC,OAAO,EAAE;YAAX,CAAhB,CAFJ;;UAAA;YAEnBC,cAFmB;YAGzBH,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cACnBC,GAAG,EAAE,8BADc;cAEnBH,cAAc,EAAdA;YAFmB,CAArB;YAHyB;YAAA;;UAAA;YAAA;YAAA;YAAA,iCAQlBH,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cAC1BC,GAAG,EAAE;YADqB,CAArB,CARkB;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAApBR,oBAAoB;IAAA;EAAA;AAAA,GAA1B;;AAcA,IAAMS,cAAc;EAAA,uEAAG;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAOR,GAAP,8DAAaL,OAAb;YAAsBM,GAAtB,8DAA4BP,QAA5B;YAAA;YAEbe,IAFa,GAENT,GAAG,CAACS,IAFE;YAAA;YAAA,OAIGZ,OAAO,CAACK,OAAR,CAAgB;cAAEC,OAAO,EAAE;YAAX,CAAhB,CAJH;;UAAA;YAAA;YAIXO,GAJW,yBAIXA,GAJW;YAAA;YAAA,OAMeb,OAAO,CAACc,iBAAR,CAA0BD,GAA1B,EAA+BD,IAA/B,EAAqC;cACrE,OAAK;YADgE,CAArC,CANf;;UAAA;YAMbG,mBANa;YAUnBX,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cACnBC,GAAG,EAAE,uBADc;cAEnBK,mBAAmB,EAAnBA;YAFmB,CAArB;YAVmB;YAAA;;UAAA;YAAA;YAAA;YAAA,kCAeZX,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cAC1BC,GAAG,iCAA0B,aAAIM,OAA9B;YADuB,CAArB,CAfY;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAAdL,cAAc;IAAA;EAAA;AAAA,GAApB;;AAqBA,IAAMM,6BAA6B;EAAA,uEAAG,kBAAOd,GAAP,EAAYC,GAAZ,EAAiBc,IAAjB;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAE5BN,IAF4B,GAErBT,GAAG,CAACS,IAFiB;YAGlCO,OAAO,CAACC,GAAR,CAAY;cAAER,IAAI,EAAJA;YAAF,CAAZ;YACMS,MAJ4B,GAInB,IAAIpB,MAAJ,CAAWW,IAAX,CAJmB;YAKlCO,OAAO,CAACC,GAAR,CAAY;cAAEC,MAAM,EAANA;YAAF,CAAZ;YALkC;YAAA,OAMVA,MAAM,CAACC,IAAP,EANU;;UAAA;YAM5BC,SAN4B;YAOlCJ,OAAO,CAACC,GAAR,CAAY;cAAEG,SAAS,EAATA;YAAF,CAAZ;;YAPkC,IAQ7BA,SAR6B;cAAA;cAAA;YAAA;;YAAA,MAS1BxB,IAAI,CAACyB,UAAL,CAAgB,2CAAhB,CAT0B;;UAAA;YAWhCpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cACnBO,OAAO,EAAE,0CADU;cAEnBO,SAAS,EAATA;YAFmB,CAArB;;UAXgC;YAAA;YAAA;;UAAA;YAAA;YAAA;YAiBlCL,IAAI,cAAJ;;UAjBkC;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAA7BD,6BAA6B;IAAA;EAAA;AAAA,GAAnC;;AAqBA,IAAMQ,gCAAgC;EAAA,uEAAG,kBAAOtB,GAAP,EAAYC,GAAZ,EAAiBc,IAAjB;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;YAE/BN,IAF+B,GAExBT,GAAG,CAACS,IAFoB;YAG7BC,GAH6B,GAGrBV,GAAG,CAACuB,MAHiB,CAG7Bb,GAH6B;YAIrCM,OAAO,CAACC,GAAR,CAAY;cAAER,IAAI,EAAJA;YAAF,CAAZ;YAJqC;YAAA,OAKhBX,MAAM,CAACa,iBAAP,CAAyBD,GAAzB,EAA8BD,IAA9B,EAAoC;cAAE,OAAK;YAAP,CAApC,CALgB;;UAAA;YAK/BS,MAL+B;;YAAA,IAMhCA,MANgC;cAAA;cAAA;YAAA;;YAAA,MAO7BtB,IAAI,CAACyB,UAAL,CAAgB,2CAAhB,CAP6B;;UAAA;YASnCpB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;cACnBO,OAAO,qDAA8CH,GAA9C,CADY;cAEnBQ,MAAM,EAANA;YAFmB,CAArB;;UATmC;YAAA;YAAA;;UAAA;YAAA;YAAA;YAerCH,IAAI,cAAJ;;UAfqC;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAAhCO,gCAAgC;IAAA;EAAA;AAAA,GAAtC;;AAmBAE,MAAM,CAACC,OAAP,GAAiB;EACf1B,oBAAoB,EAApBA,oBADe;EAEfS,cAAc,EAAdA,cAFe;EAGfM,6BAA6B,EAA7BA,6BAHe;EAIfQ,gCAAgC,EAAhCA;AAJe,CAAjB"}