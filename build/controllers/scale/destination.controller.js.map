{"version":3,"file":"destination.controller.js","names":["require","response","request","Destination","getDestinations","req","res","findAll","where","enabled","destinations","status","json","msg","message","getDestinationById","id","params","findByPk","destination","console","log","updateDestinationById","body","name","enable","destinationUpdated","save","deleteDestinationById","deletedDestination","createDestination","create","newDestination","module","exports"],"sources":["../../../src/controllers/scale/destination.controller.js"],"sourcesContent":["const { response, request } = require('express');\nconst Destination = require('../../models/scale/destination.model');\n\n\nconst getDestinations = async (req = request, res = response) => {\n    try {\n        const destinations = await Destination.findAll({ where: { enabled: true } });\n        res.status(200).json({\n            msg: 'Lista de destinos',\n            destinations\n        })\n    } catch (err) {\n        return res.status(500).json({ message: err.message });\n    }\n}\n\n\nconst getDestinationById = async (req = request, res = response) => {\n    try {\n        const { id } = req.params;\n        const destination = await Destination.findByPk(id);\n\n        if (Destination != null) {\n            res.status(200).json({\n                msg: 'InformaciÃ³n del origen',\n                destination\n            });\n        } else {\n            console.log('Not found');\n            res.status(200).json({\n                msg: 'Origen no encontrado, verifique id'\n            });\n        }\n\n    } catch (err) {\n        return res.status(500).json({ message: `Se ha producido un error, ${err.message}` });\n    }\n}\n\n\nconst updateDestinationById = async (req = request, res = response) => {\n    try {\n        const { id } = req.params;\n        const { name, enable } = req.body;\n        const destinationUpdated = await Destination.findByPk(id);\n\n        if (destinationUpdated != null) {\n            console.log('found');\n            destinationUpdated.name = name;\n            destinationUpdated.enable = enable;\n\n            await destinationUpdated.save();\n\n            res.status(200).json({\n                msg: 'Origen actualizado',\n                destinationUpdated\n            });\n        } else {\n            console.log('Not found');\n            res.status(200).json({\n                msg: 'Origen no encontrado, verifique id'\n            });\n        }\n\n    } catch (err) {\n        return res.status(500).json({ message: `Se ha producido un error, ${err.message}` });\n    }\n}\n\n\nconst deleteDestinationById = async (req = request, res = response) => {\n    try {\n        const { id } = req.params;\n        const deletedDestination = await Destination.findByPk(id);\n        if (deletedDestination != null) {\n\n            deletedDestination.enabled = false;\n            deletedDestination.save();\n\n            res.status(202).json({\n                msg: `Destino con Id: ${id}, ha sido eliminado.`\n            });\n        } else {\n            res.status(404).json({\n                msg: `El destino Id: ${id} no encontrado, favor verifique el Id.`\n            })\n        }\n    } catch (err) {\n        return res.status(500).json({ message: err.message })\n    }\n}\n\n\n\nconst createDestination = async (req = request, res = response) => {\n    try {\n        const { name } = req.body\n        const newDestination = await Destination.create({\n            name\n        });\n\n        res.status(201).json({\n            msg: 'Origen creado satisfactoriamente!',\n            newDestination\n        })\n    } catch (err) {\n        return res.status(500).json({ message: `Se ha producido un error, ${err.message}` })\n    }\n\n}\n\n\n\nmodule.exports = {\n    getDestinations,\n    getDestinationById,\n    updateDestinationById,\n    deleteDestinationById,\n    createDestination\n}"],"mappings":"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"}