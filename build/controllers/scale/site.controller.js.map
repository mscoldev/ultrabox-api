{"version":3,"file":"site.controller.js","names":["require","response","request","Site","getSites","req","res","findAll","where","enabled","site","status","json","msg","message","getSiteById","id","params","findByPk","console","log","updateSiteById","body","name","enable","siteUpdated","save","deleteSiteById","deletedSite","createSite","create","newSite","module","exports"],"sources":["../../../src/controllers/scale/site.controller.js"],"sourcesContent":["const { response, request } = require('express');\nconst Site = require('../../models/scale/site.model');\n\n\nconst getSites = async (req = request, res = response) => {\n    try {\n        const site = await Site.findAll({ where: { enabled: true } });\n        res.status(200).json({\n            msg: 'Lista de Sitios',\n            site\n        })\n    } catch (err) {\n        return res.status(500).json({ message: err.message });\n    }\n}\n\n\nconst getSiteById = async (req = request, res = response) => {\n    try {\n        const { id } = req.params;\n        const site = await Site.findByPk(id);\n        if (site != null) {\n            res.status(200).json({\n                msg: 'Informacion del sitio',\n                site\n            });\n        } else {\n            console.log('Not found');\n            res.status(200).json({\n                msg: 'Projecto no encontrado, verifique id'\n            });\n        }\n\n    } catch (err) {\n        return res.status(500).json({ message: `Se ha producido un error, ${err.message}` });\n    }\n}\n\n\nconst updateSiteById = async (req = request, res = response) => {\n    try {\n        const { id } = req.params;\n        const { name, enable } = req.body;\n        const siteUpdated = await Site.findByPk(id);\n\n        if (siteUpdated != null) {\n            console.log('found');\n            siteUpdated.name = name;\n            siteUpdated.enable = enable;\n\n            await siteUpdated.save();\n\n            res.status(200).json({\n                msg: 'Sitio actializado',\n                siteUpdated\n            });\n        } else {\n            console.log('Not found');\n            res.status(200).json({\n                msg: 'El sitio no se ha encontrado, verifique el Id.'\n            });\n        }\n\n    } catch (err) {\n        return res.status(500).json({ message: `Se ha producido un error, ${err.message}` });\n    }\n}\n\n\nconst deleteSiteById = async (req = request, res = response) => {\n    try {\n        const { id } = req.params;\n        const deletedSite = await Site.findByPk(id);\n        if (deletedSite != null) {\n\n            deletedSite.enabled = false;\n            await deletedSite.save();\n            res.status(202).json({\n                msg: `El sitio con Id: ${id}, ha sido eliminado.`\n            });\n        } else {\n            res.status(404).json({\n                msg: `El sitio con Id: ${id} no encontrado, verifique el Id.`\n            })\n        }\n    } catch (err) {\n        return res.status(500).json({ message: err.message })\n    }\n}\n\n\n\nconst createSite = async (req = request, res = response) => {\n    try {\n        const { name } = req.body\n        const newSite = await Site.create({\n            name\n        });\n\n        res.status(201).json({\n            msg: 'Origen creado satisfactoriamente!',\n            newSite\n        })\n    } catch (err) {\n        return res.status(500).json({ message: `Se ha producido un error, ${err.message}` })\n    }\n\n}\n\n\n\nmodule.exports = {\n    getSites,\n    getSiteById,\n    updateSiteById,\n    deleteSiteById,\n    createSite\n}"],"mappings":"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"}