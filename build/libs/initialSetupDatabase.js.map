{"version":3,"file":"initialSetupDatabase.js","names":["Role","require","ConfApp","createRoles","estimatedDocumentCount","count","Promise","all","name","app","menu","save","values","console","log","error","createInitialConfApp","company","nit","initSerial","initialConf","module","exports"],"sources":["../../src/libs/initialSetupDatabase.js"],"sourcesContent":["const Role = require('../models/role.model');\nconst ConfApp = require('../models/confApp.model');\n\n//* Initial configuration Roles in database\n\nconst createRoles = async () => {\n  try {\n    const count = await Role.estimatedDocumentCount();\n\n    if (count > 0) return;\n\n    const values = await Promise.all([\n      new Role({\n        name: 'user',\n        app: 'ultraindustria',\n        menu: [\n          {\n            \"text\": \"Dashboard\",\n            \"link\": \"main.dashboard\",\n            \"submain\": [],\n            \"actions\": [\n              \"R\",\n              \"W\",\n              \"D\"\n            ]\n          },\n          {\n            \"text\": \"Producción\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Log Registros\",\n                \"link\": \"main.log\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Configuración\",\n                \"link\": \"\",\n                \"submain\": [\n                  {\n                    \"text\": \"Materiales\",\n                    \"link\": \"main.material\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  },\n                  {\n                    \"text\": \"Receta\",\n                    \"link\": \"main.recipe\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Planeación\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Calendario\",\n                \"link\": \"main.calendar\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Seguridad\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Roles\",\n                \"link\": \"main.role\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Usuarios\",\n                \"link\": \"main.user\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          }\n        ],\n      }).save(),\n      new Role({\n        name: 'admin',\n        app: 'ultraindustria',\n        menu: [\n          {\n            \"text\": \"Dashboard\",\n            \"link\": \"main.dashboard\",\n            \"submain\": [],\n            \"actions\": [\n              \"R\",\n              \"W\",\n              \"D\"\n            ]\n          },\n          {\n            \"text\": \"Producción\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Log Registros\",\n                \"link\": \"main.log\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Configuración\",\n                \"link\": \"\",\n                \"submain\": [\n                  {\n                    \"text\": \"Materiales\",\n                    \"link\": \"main.material\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  },\n                  {\n                    \"text\": \"Receta\",\n                    \"link\": \"main.recipe\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Planeación\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Calendario\",\n                \"link\": \"main.calendar\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Seguridad\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Roles\",\n                \"link\": \"main.role\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Usuarios\",\n                \"link\": \"main.user\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          }\n        ],\n      }).save(),\n      new Role({\n        name: 'operator',\n        app: 'ultraindustria',\n        menu: [\n          {\n            \"text\": \"Dashboard\",\n            \"link\": \"main.dashboard\",\n            \"submain\": [],\n            \"actions\": [\n              \"R\",\n              \"W\",\n              \"D\"\n            ]\n          },\n          {\n            \"text\": \"Producción\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Log Registros\",\n                \"link\": \"main.log\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Configuración\",\n                \"link\": \"\",\n                \"submain\": [\n                  {\n                    \"text\": \"Materiales\",\n                    \"link\": \"main.material\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  },\n                  {\n                    \"text\": \"Receta\",\n                    \"link\": \"main.recipe\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Planeación\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Calendario\",\n                \"link\": \"main.calendar\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Seguridad\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Roles\",\n                \"link\": \"main.role\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Usuarios\",\n                \"link\": \"main.user\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          }\n        ],\n      }).save(),\n      new Role({\n        name: 'planner',\n        app: 'ultraindustria',\n        menu: [\n          {\n            \"text\": \"Dashboard\",\n            \"link\": \"main.dashboard\",\n            \"submain\": [],\n            \"actions\": [\n              \"R\",\n              \"W\",\n              \"D\"\n            ]\n          },\n          {\n            \"text\": \"Producción\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Log Registros\",\n                \"link\": \"main.log\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Configuración\",\n                \"link\": \"\",\n                \"submain\": [\n                  {\n                    \"text\": \"Materiales\",\n                    \"link\": \"main.material\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  },\n                  {\n                    \"text\": \"Receta\",\n                    \"link\": \"main.recipe\",\n                    \"actions\": [\n                      \"R\",\n                      \"W\",\n                      \"D\"\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Planeación\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Calendario\",\n                \"link\": \"main.calendar\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          },\n          {\n            \"text\": \"Seguridad\",\n            \"link\": \"\",\n            \"submain\": [\n              {\n                \"text\": \"Roles\",\n                \"link\": \"main.role\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              },\n              {\n                \"text\": \"Usuarios\",\n                \"link\": \"main.user\",\n                \"submain\": [],\n                \"actions\": [\n                  \"R\",\n                  \"W\",\n                  \"D\"\n                ]\n              }\n            ]\n          }\n        ],\n      }).save()\n    ]);\n\n    console.log(values);\n  } catch (error) {\n    console.error(error);\n  }\n\n}\n\nconst createInitialConfApp = async () => {\n  try {\n    const count = await ConfApp.estimatedDocumentCount();\n\n    if (count > 0) return;\n\n    const initialConf = await new ConfApp({\n      company: 'MIOBOX APP',\n      nit: '123456789-0',\n      initSerial: 1\n    }).save()\n    console.log(initialConf);\n\n  } catch (error) {\n    console.error(error);\n  }\n\n}\n\n\n\nmodule.exports = { createRoles, createInitialConfApp };"],"mappings":"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"}