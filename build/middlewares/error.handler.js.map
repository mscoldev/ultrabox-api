{"version":3,"file":"error.handler.js","names":["logErrors","err","req","res","next","console","log","error","message","errorHandler","code","keyValue","name","status","json","stack","boomErrorHandler","isBoom","output","statusCode","payload","module","exports"],"sources":["../../src/middlewares/error.handler.js"],"sourcesContent":["function logErrors(err, req, res, next) {\n  console.log(\"*******LOG ERROR********\")\n  console.error(err.message);\n  next(err);\n}\n\nfunction errorHandler(err, req, res, next) {\n  console.log(\"*****ERROR HANDLER********\");\n\n  if (err.code === 11000) {\n    const message = `El valor ${err.keyValue.name} ya existe en la base de datos`;\n    console.log({ err });\n    return res.status(409).json({ message });\n  }\n\n  res.status(500).json({\n    message: err.message,\n    stack: err.stack\n  });\n}\n\nfunction boomErrorHandler(err, req, res, next) {\n\n  console.log(\"*******BOOM ERROR HANDLER********\");\n  if (err.isBoom === true) {\n    console.log(err);\n    const { output } = err;\n    res.status(output.statusCode).json(output.payload);\n  } else {\n    next(err);\n  }\n\n}\n\nmodule.exports = { logErrors, errorHandler, boomErrorHandler }\n"],"mappings":";;AAAA,SAASA,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,IAAlC,EAAwC;EACtCC,OAAO,CAACC,GAAR,CAAY,0BAAZ;EACAD,OAAO,CAACE,KAAR,CAAcN,GAAG,CAACO,OAAlB;EACAJ,IAAI,CAACH,GAAD,CAAJ;AACD;;AAED,SAASQ,YAAT,CAAsBR,GAAtB,EAA2BC,GAA3B,EAAgCC,GAAhC,EAAqCC,IAArC,EAA2C;EACzCC,OAAO,CAACC,GAAR,CAAY,4BAAZ;;EAEA,IAAIL,GAAG,CAACS,IAAJ,KAAa,KAAjB,EAAwB;IACtB,IAAMF,OAAO,sBAAeP,GAAG,CAACU,QAAJ,CAAaC,IAA5B,mCAAb;IACAP,OAAO,CAACC,GAAR,CAAY;MAAEL,GAAG,EAAHA;IAAF,CAAZ;IACA,OAAOE,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAAEN,OAAO,EAAPA;IAAF,CAArB,CAAP;EACD;;EAEDL,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;IACnBN,OAAO,EAAEP,GAAG,CAACO,OADM;IAEnBO,KAAK,EAAEd,GAAG,CAACc;EAFQ,CAArB;AAID;;AAED,SAASC,gBAAT,CAA0Bf,GAA1B,EAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,IAAzC,EAA+C;EAE7CC,OAAO,CAACC,GAAR,CAAY,mCAAZ;;EACA,IAAIL,GAAG,CAACgB,MAAJ,KAAe,IAAnB,EAAyB;IACvBZ,OAAO,CAACC,GAAR,CAAYL,GAAZ;IACA,IAAQiB,MAAR,GAAmBjB,GAAnB,CAAQiB,MAAR;IACAf,GAAG,CAACU,MAAJ,CAAWK,MAAM,CAACC,UAAlB,EAA8BL,IAA9B,CAAmCI,MAAM,CAACE,OAA1C;EACD,CAJD,MAIO;IACLhB,IAAI,CAACH,GAAD,CAAJ;EACD;AAEF;;AAEDoB,MAAM,CAACC,OAAP,GAAiB;EAAEtB,SAAS,EAATA,SAAF;EAAaS,YAAY,EAAZA,YAAb;EAA2BO,gBAAgB,EAAhBA;AAA3B,CAAjB"}