{"version":3,"file":"user.model.js","names":["require","Schema","model","bcrypt","userSchema","username","type","String","unique","required","name","middleName","firstSurname","secondSurname","nit","typeDocument","email","mobile","password","status","Boolean","deleted","role","ref","Types","ObjectId","timestamps","versionKey","statics","encryptPassword","genSalt","salt","hash","comparePassword","receivedPassword","compare","methods","toJSON","toObject","_id","user","uid","module","exports"],"sources":["../../src/models/user.model.js"],"sourcesContent":["const { Schema, model } = require(\"mongoose\");\nconst bcrypt = require(\"bcryptjs\");\n\nconst userSchema = Schema({\n    username: {\n        type: String,\n        unique: [true, 'Este username ya se encuentra registrado'],\n        required: [true, 'El nombre de usuario es requerido']\n    },\n    name: {\n        type: String,\n        required: [true, 'Debe definir un nombre para el usuario']\n    },\n    middleName: {\n        type: String,\n    },\n    firstSurname: {\n        type: String,\n        required: [true, 'El primer apellido es obligatorio']\n    },\n    secondSurname: {\n        type: String,\n    },\n    nit: {\n        type: String,\n        required: [true, 'El número de identificacion es requerido'],\n        unique: [true, 'El numero de identificacion está definido como unico']\n    },\n    typeDocument: {\n        type: String,\n        required: true,\n    },\n    email: {\n        type: String,\n        unique: [true, 'Este email ya se encuentra registrado, registre un nuevo correo.'],\n        required: [true, 'El correo es requerido, debe definir uno.'],\n    },\n    mobile: {\n        type: String,\n        default: \"\"\n    },\n    password: {\n        type: String,\n        required: true,\n    },\n    status: {\n        type: Boolean,\n        default: true,\n    },\n    deleted: {\n        type: Boolean,\n        default: false,\n    },\n    role: {\n        ref: 'Role',\n        type: Schema.Types.ObjectId\n    },\n\n}, {\n    timestamps: true,\n    versionKey: false\n})\n\n\nuserSchema.statics.encryptPassword = async (password) => {\n    const salt = await bcrypt.genSalt(10)\n    return await bcrypt.hash(password, salt)\n}\n\nuserSchema.statics.comparePassword = async (password, receivedPassword) => {\n    return await bcrypt.compare(password, receivedPassword)\n    // Return: False or True\n}\n\nuserSchema.methods.toJSON = function () {\n    const { password, deleted, _id, ...user } = this.toObject();\n    user.uid = _id;\n    return user\n}\n\nmodule.exports = model('User', userSchema);"],"mappings":"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"}