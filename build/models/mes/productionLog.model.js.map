{"version":3,"file":"productionLog.model.js","names":["require","Schema","model","moment","productionLogSchema","codigo","type","Number","required","unidad","String","cantidad","estado","Boolean","molino","_idProductionLine","ref","Types","ObjectId","receta","silo","kwhpd004","kwhpd005","kwhpd006","m3gas","m3ton","migrate","date","Date","now","timestamps","versionKey","methods","toJSON","productionLog","toObject","createdAt","format","updatedAt","module","exports"],"sources":["../../../src/models/mes/productionLog.model.js"],"sourcesContent":["const { Schema, model } = require('mongoose');\nconst moment = require('moment');\n\nrequire('../../libs/round.lib');\n\nconst productionLogSchema = Schema(\n  {\n    codigo: {\n      type: Number,\n      required: [true, 'El codigo es requerido'],\n    },\n    unidad: {\n      type: String,\n      required: [true, 'La unidad de medida es requerida'],\n    },\n    cantidad: {\n      type: Number,\n      required: [true, 'Las cantidades son requeridas para el registro'],\n    },\n    estado: {\n      type: Boolean,\n      default: false,\n    },\n    molino: {\n      type: String,\n      required: [true, 'Debe indicar el punto de producción molino'],\n    },\n    _idProductionLine: {\n      ref: 'ProductionLine',\n      type: Schema.Types.ObjectId,\n    },\n    receta: {\n      type: Number,\n      required: [\n        true,\n        'Debe definir una receta para el registro de producción',\n      ],\n    },\n    silo: {\n      type: Number,\n      required: [\n        true,\n        'Debe seleccionar un lugar de destino para la producción',\n      ],\n    },\n    kwhpd004: {\n      type: Number,\n      required: [false],\n      default: 0,\n    },\n    kwhpd005: {\n      type: Number,\n      required: [false],\n      default: 0,\n    },\n    kwhpd006: {\n      type: Number,\n      required: [false],\n      default: 0,\n    },\n    m3gas: {\n      type: Number,\n      required: [false],\n      default: 0,\n    },\n    m3ton: {\n      type: Number,\n      required: [false],\n      default: 0,\n    },\n    migrate: [\n      {\n        type: {\n          type: String,\n          default: 'none',\n        },\n        date: {\n          type: Date,\n          default: Date.now,\n        },\n      },\n    ],\n  },\n  {\n    timestamps: true,\n    versionKey: false,\n  }\n);\n\nproductionLogSchema.methods.toJSON = function () {\n  const productionLog = this.toObject();\n  productionLog.createdAt = moment(productionLog.createdAt).format(\n    'DD-MM-YYYY HH:mm'\n  );\n  productionLog.updatedAt = moment(productionLog.updatedAt).format(\n    'DD-MM-YYYY HH:mm'\n  );\n  // productionLog.kwTot = this.kwhpd004 + this.kwhpd005 + this.kwhpd006;\n  // productionLog.kwTon = Math.floor10(productionLog.kwTot / this.cantidad, -3);\n\n  return productionLog;\n};\n\nmodule.exports = model('productionLog', productionLogSchema);\n"],"mappings":";;AAAA,eAA0BA,OAAO,CAAC,UAAD,CAAjC;AAAA,IAAQC,MAAR,YAAQA,MAAR;AAAA,IAAgBC,KAAhB,YAAgBA,KAAhB;;AACA,IAAMC,MAAM,GAAGH,OAAO,CAAC,QAAD,CAAtB;;AAEAA,OAAO,CAAC,sBAAD,CAAP;;AAEA,IAAMI,mBAAmB,GAAGH,MAAM,CAChC;EACEI,MAAM,EAAE;IACNC,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE,CAAC,IAAD,EAAO,wBAAP;EAFJ,CADV;EAKEC,MAAM,EAAE;IACNH,IAAI,EAAEI,MADA;IAENF,QAAQ,EAAE,CAAC,IAAD,EAAO,kCAAP;EAFJ,CALV;EASEG,QAAQ,EAAE;IACRL,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,CAAC,IAAD,EAAO,gDAAP;EAFF,CATZ;EAaEI,MAAM,EAAE;IACNN,IAAI,EAAEO,OADA;IAEN,WAAS;EAFH,CAbV;EAiBEC,MAAM,EAAE;IACNR,IAAI,EAAEI,MADA;IAENF,QAAQ,EAAE,CAAC,IAAD,EAAO,4CAAP;EAFJ,CAjBV;EAqBEO,iBAAiB,EAAE;IACjBC,GAAG,EAAE,gBADY;IAEjBV,IAAI,EAAEL,MAAM,CAACgB,KAAP,CAAaC;EAFF,CArBrB;EAyBEC,MAAM,EAAE;IACNb,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE,CACR,IADQ,EAER,wDAFQ;EAFJ,CAzBV;EAgCEY,IAAI,EAAE;IACJd,IAAI,EAAEC,MADF;IAEJC,QAAQ,EAAE,CACR,IADQ,EAER,yDAFQ;EAFN,CAhCR;EAuCEa,QAAQ,EAAE;IACRf,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,CAAC,KAAD,CAFF;IAGR,WAAS;EAHD,CAvCZ;EA4CEc,QAAQ,EAAE;IACRhB,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,CAAC,KAAD,CAFF;IAGR,WAAS;EAHD,CA5CZ;EAiDEe,QAAQ,EAAE;IACRjB,IAAI,EAAEC,MADE;IAERC,QAAQ,EAAE,CAAC,KAAD,CAFF;IAGR,WAAS;EAHD,CAjDZ;EAsDEgB,KAAK,EAAE;IACLlB,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE,CAAC,KAAD,CAFL;IAGL,WAAS;EAHJ,CAtDT;EA2DEiB,KAAK,EAAE;IACLnB,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE,CAAC,KAAD,CAFL;IAGL,WAAS;EAHJ,CA3DT;EAgEEkB,OAAO,EAAE,CACP;IACEpB,IAAI,EAAE;MACJA,IAAI,EAAEI,MADF;MAEJ,WAAS;IAFL,CADR;IAKEiB,IAAI,EAAE;MACJrB,IAAI,EAAEsB,IADF;MAEJ,WAASA,IAAI,CAACC;IAFV;EALR,CADO;AAhEX,CADgC,EA8EhC;EACEC,UAAU,EAAE,IADd;EAEEC,UAAU,EAAE;AAFd,CA9EgC,CAAlC;;AAoFA3B,mBAAmB,CAAC4B,OAApB,CAA4BC,MAA5B,GAAqC,YAAY;EAC/C,IAAMC,aAAa,GAAG,KAAKC,QAAL,EAAtB;EACAD,aAAa,CAACE,SAAd,GAA0BjC,MAAM,CAAC+B,aAAa,CAACE,SAAf,CAAN,CAAgCC,MAAhC,CACxB,kBADwB,CAA1B;EAGAH,aAAa,CAACI,SAAd,GAA0BnC,MAAM,CAAC+B,aAAa,CAACI,SAAf,CAAN,CAAgCD,MAAhC,CACxB,kBADwB,CAA1B,CAL+C,CAQ/C;EACA;;EAEA,OAAOH,aAAP;AACD,CAZD;;AAcAK,MAAM,CAACC,OAAP,GAAiBtC,KAAK,CAAC,eAAD,EAAkBE,mBAAlB,CAAtB"}